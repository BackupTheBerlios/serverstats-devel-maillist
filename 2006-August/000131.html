<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Serverstats-devel] r162 - in branches/xmlconfig2: config.sample	config.sample/xml config.sample/xml/templates includes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/serverstats-devel/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:serverstats-devel%40lists.berlios.de?Subject=Re%3A%20%5BServerstats-devel%5D%20r162%20-%20in%20branches/xmlconfig2%3A%20config.sample%0A%09config.sample/xml%20config.sample/xml/templates%20includes&In-Reply-To=%3C200608021909.k72J9u21023937%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000132.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Serverstats-devel] r162 - in branches/xmlconfig2: config.sample	config.sample/xml config.sample/xml/templates includes</H1>
    <B>scramatte at mail.berlios.de</B> 
    <A HREF="mailto:serverstats-devel%40lists.berlios.de?Subject=Re%3A%20%5BServerstats-devel%5D%20r162%20-%20in%20branches/xmlconfig2%3A%20config.sample%0A%09config.sample/xml%20config.sample/xml/templates%20includes&In-Reply-To=%3C200608021909.k72J9u21023937%40sheep.berlios.de%3E"
       TITLE="[Serverstats-devel] r162 - in branches/xmlconfig2: config.sample	config.sample/xml config.sample/xml/templates includes">scramatte at mail.berlios.de
       </A><BR>
    <I>Wed Aug  2 21:09:56 CEST 2006</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000132.html">[Serverstats-devel] r163 - in branches/xmlconfig2: config.sample	config.sample/xml includes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#131">[ date ]</a>
              <a href="thread.html#131">[ thread ]</a>
              <a href="subject.html#131">[ subject ]</a>
              <a href="author.html#131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: scramatte
Date: 2006-08-02 21:09:49 +0200 (Wed, 02 Aug 2006)
New Revision: 162

Modified:
   branches/xmlconfig2/config.sample/clean.xsl
   branches/xmlconfig2/config.sample/graph.php
   branches/xmlconfig2/config.sample/sources.php
   branches/xmlconfig2/config.sample/xml.php
   branches/xmlconfig2/config.sample/xml/graphs.xml
   branches/xmlconfig2/config.sample/xml/sources.xml
   branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load-graph.xml
   branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load.xml
   branches/xmlconfig2/includes/xmlconfig.class.php
Log:
Somes updates to be more &quot;KISS&quot; compliant ... ;)


Modified: branches/xmlconfig2/config.sample/clean.xsl
===================================================================
--- branches/xmlconfig2/config.sample/clean.xsl	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/clean.xsl	2006-08-02 19:09:49 UTC (rev 162)
@@ -19,4 +19,10 @@
         &lt;/xsl:copy&gt;
 &lt;/xsl:template&gt;
 
+
+&lt;xsl:template match=&quot;stats:template&quot;&gt;
+       &lt;xsl:apply-templates /&gt;
+&lt;/xsl:template&gt;
+
+
 &lt;/xsl:stylesheet&gt;

Modified: branches/xmlconfig2/config.sample/graph.php
===================================================================
--- branches/xmlconfig2/config.sample/graph.php	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/graph.php	2006-08-02 19:09:49 UTC (rev 162)
@@ -32,7 +32,7 @@
 $config['list'] = array();
 // Add graphs using the simple configuration
 // (To change what graphs are generated by simpleconfig please edit simple.php)
-//simpleconfig::graph($config, $rootConfig['simple']);
+// simpleconfig::graph($config, $rootConfig['simple']);
 xmlconfig::graph($config, $rootConfig['xml']);
 
 $config['tree'] = array(

Modified: branches/xmlconfig2/config.sample/sources.php
===================================================================
--- branches/xmlconfig2/config.sample/sources.php	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/sources.php	2006-08-02 19:09:49 UTC (rev 162)
@@ -27,7 +27,7 @@
 
 // Add sources using the simple configuration
 // (To change what sources are used by simpleconfig please edit simple.php)
-// simpleconfig::sources($config, $rootConfig['simple']);
+//simpleconfig::sources($config, $rootConfig['simple']);
 xmlconfig::sources($config, $rootConfig['xml']);
 
 // Add own sources (examples, like those used in the simple-config)

Modified: branches/xmlconfig2/config.sample/xml/graphs.xml
===================================================================
--- branches/xmlconfig2/config.sample/xml/graphs.xml	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/xml/graphs.xml	2006-08-02 19:09:49 UTC (rev 162)
@@ -1,6 +1,17 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
-&lt;graphs xmlns=&quot;urn:serverstats&quot; xmlns:stats=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot; xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;&gt;
+&lt;graphs xmlns=&quot;urn:serverstats&quot; xmlns:stats=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot;&gt;
 	&lt;graph name=&quot;snmp1&quot;&gt;
-		&lt;xi:include href=&quot;templates/ucd-snmp-mib-load-graph.xml#xmlns(s=urn:serverstats)xpointer(/s:template/*)&quot; /&gt;
+		&lt;list name=&quot;categories&quot; &gt;
+			&lt;param name=&quot;impact&quot;&gt;critical&lt;/param&gt;
+		&lt;/list&gt;
+		&lt;xi:include href=&quot;templates/ucd-snmp-mib-load-graph.xml&quot; /&gt;
 	&lt;/graph&gt;
+
+        &lt;graph name=&quot;snmp2&quot;&gt;
+                &lt;list  name=&quot;categories&quot; &gt;
+                        &lt;param name=&quot;impact&quot;&gt;important&lt;/param&gt;
+                &lt;/list&gt;
+                &lt;xi:include href=&quot;templates/ucd-snmp-mib-load-graph.xml&quot; /&gt;
+        &lt;/graph&gt;
+
 &lt;/graphs&gt;

Modified: branches/xmlconfig2/config.sample/xml/sources.xml
===================================================================
--- branches/xmlconfig2/config.sample/xml/sources.xml	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/xml/sources.xml	2006-08-02 19:09:49 UTC (rev 162)
@@ -1,8 +1,13 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
-&lt;sources xmlns=&quot;urn:serverstats&quot; xmlns:stats=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot; xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;  &gt;
+&lt;sources xmlns=&quot;urn:serverstats&quot; xmlns:stats=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot; &gt;
 	&lt;source type=&quot;cpu&quot; id=&quot;cpu2&quot; /&gt;
 	&lt;source type=&quot;snmp&quot; id=&quot;snmp1_load&quot;&gt;
 		&lt;param name=&quot;host&quot;&gt;127.0.0.1&lt;/param&gt;
-		&lt;xi:include href=&quot;templates/ucd-snmp-mib-load.xml#xmlns(s=urn:serverstats)xpointer(/s:template/*)&quot; /&gt;
+		&lt;xi:include href=&quot;templates/ucd-snmp-mib-load.xml&quot; /&gt;
 	&lt;/source&gt;
+
+        &lt;source type=&quot;snmp&quot; id=&quot;snmp2_load&quot;&gt;
+                &lt;param name=&quot;host&quot;&gt;82.97.11.139&lt;/param&gt;
+                &lt;xi:include href=&quot;templates/ucd-snmp-mib-load.xml&quot; /&gt;
+        &lt;/source&gt;
 &lt;/sources&gt;

Modified: branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load-graph.xml
===================================================================
--- branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load-graph.xml	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load-graph.xml	2006-08-02 19:09:49 UTC (rev 162)
@@ -1,116 +1,115 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
-&lt;template xmlns=&quot;urn:serverstats&quot; xmlns:s=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot;  xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;&gt;
+&lt;template xmlns=&quot;urn:serverstats&quot; xmlns:s=&quot;urn:serverstats&quot; xmlns:xi=&quot;<A HREF="http://www.w3.org/2001/XInclude">http://www.w3.org/2001/XInclude</A>&quot;&gt;
 				&lt;param name=&quot;title&quot; value=&quot;Load {../@name}&quot; /&gt;
 				&lt;param name=&quot;lowerLimit&quot;&gt;0&lt;/param&gt;
 				&lt;param name=&quot;altAutoscaleMax&quot;&gt;true&lt;/param&gt;
-				&lt;param name=&quot;content&quot; xsi:type=&quot;xsd:array&quot;&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+				&lt;list name=&quot;content&quot;&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;COMMENT&lt;/param&gt;
 							&lt;param name=&quot;text&quot;&gt;average number of tasks in the queue\:\n&lt;/param&gt;
-						&lt;/param&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;LINE&lt;/param&gt;
-p							&lt;param name=&quot;source&quot; value=&quot;{../../../@name}_load&quot; /&gt;
+							&lt;param name=&quot;source&quot; value=&quot;{../../../@name}_load&quot; /&gt;
 							&lt;param name=&quot;ds&quot;&gt;1min&lt;/param&gt;
 							&lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
 							&lt;param name=&quot;legend&quot;&gt;1 minute&lt;/param&gt;
 							&lt;param name=&quot;width&quot;&gt;1&lt;/param&gt;
 							&lt;param name=&quot;color&quot;&gt;FFDD00&lt;/param&gt;
-						&lt;/param&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
 							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_1min&quot; /&gt;
 							&lt;param name=&quot;cf&quot;&gt;LAST&lt;/param&gt;
 							&lt;param name=&quot;format&quot;&gt;  cur\: %01.2lf&lt;/param&gt;
-						&lt;/param&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
 							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_1min&quot; /&gt;
 							&lt;param name=&quot;cf&quot;&gt;MAXIMUM&lt;/param&gt;
 							&lt;param name=&quot;format&quot;&gt;  max\: %01.2lf&lt;/param&gt;
-						&lt;/param&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
 							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_1min&quot; /&gt;
 							&lt;param name=&quot;cf&quot;&gt;MINIMUM&lt;/param&gt;
 							&lt;param name=&quot;format&quot;&gt;  min\: %01.2lf&lt;/param&gt;
-						&lt;/param&gt;
-						&lt;param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+						&lt;list&gt;
 							&lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
 							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_1min&quot; /&gt;
 							&lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
 							&lt;param name=&quot;format&quot;&gt;  avg\: %01.2lf\n&lt;/param&gt;
-						&lt;/param&gt;
-                                                &lt;!--param xsi:type=&quot;xsd:array&quot;&gt;
+						&lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;LINE&lt;/param&gt;
-                                                        &lt;param name=&quot;source&quot;&gt;load&lt;/param&gt;
+                                                        &lt;param name=&quot;source&quot; value=&quot;{../../../@name}_load&quot; /&gt;
                                                         &lt;param name=&quot;ds&quot;&gt;5min&lt;/param&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
                                                         &lt;param name=&quot;legend&quot;&gt;5 minutes&lt;/param&gt;
                                                         &lt;param name=&quot;width&quot;&gt;1&lt;/param&gt;
                                                         &lt;param name=&quot;color&quot;&gt;FF8800&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_5min&lt;/param&gt;
+                                                        &lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_5min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;LAST&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  cur\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_5min&lt;/param&gt;
+							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_5min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;MAXIMUM&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  max\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_5min&lt;/param&gt;
-                                                        &lt;param name=&quot;cf&quot;&gt;MINIMUM&lt;/param&gt;
+                                                        &lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_5min&quot; /&gt;
+							&lt;param name=&quot;cf&quot;&gt;MINIMUM&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  min\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_5min&lt;/param&gt;
+							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_5min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  avg\: %01.2lf\n&lt;/param&gt;
-                                                &lt;/param&gt;
+                                                &lt;/list&gt;
 
-
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;LINE&lt;/param&gt;
-                                                        &lt;param name=&quot;source&quot;&gt;load&lt;/param&gt;
+                                                        &lt;param name=&quot;source&quot; value=&quot;{../../../@name}_load&quot; /&gt;
                                                         &lt;param name=&quot;ds&quot;&gt;15min&lt;/param&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
                                                         &lt;param name=&quot;legend&quot;&gt;15 minutes&lt;/param&gt;
                                                         &lt;param name=&quot;width&quot;&gt;1&lt;/param&gt;
                                                         &lt;param name=&quot;color&quot;&gt;FF0000&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_15min&lt;/param&gt;
+                                                        &lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_15min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;LAST&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  cur\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_15min&lt;/param&gt;
+							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_15min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;MAXIMUM&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  max\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_15min&lt;/param&gt;
+							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_15min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;MINIMUM&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  min\: %01.2lf&lt;/param&gt;
-                                                &lt;/param&gt;
-                                                &lt;param xsi:type=&quot;xsd:array&quot;&gt;
+                                                &lt;/list&gt;
+                                                &lt;list&gt;
                                                         &lt;param name=&quot;type&quot;&gt;GPRINT&lt;/param&gt;
-                                                        &lt;param name=&quot;name&quot;&gt;load_15min&lt;/param&gt;
+							&lt;param name=&quot;name&quot; value=&quot;{../../../@name}_load_15min&quot; /&gt;
                                                         &lt;param name=&quot;cf&quot;&gt;AVERAGE&lt;/param&gt;
                                                         &lt;param name=&quot;format&quot;&gt;  avg\: %01.2lf&lt;/param&gt;
-                                                &lt;/param--&gt;
+                                                &lt;/list&gt;
 
 
 
-				&lt;/param&gt;
+				&lt;/list&gt;
 &lt;/template&gt;

Modified: branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load.xml
===================================================================
--- branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load.xml	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/xml/templates/ucd-snmp-mib-load.xml	2006-08-02 19:09:49 UTC (rev 162)
@@ -1,9 +1,9 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
 &lt;template xmlns=&quot;urn:serverstats&quot; xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot;&gt; 
 	&lt;param name=&quot;comunity&quot;&gt;public&lt;/param&gt;
-	&lt;param name=&quot;objects&quot; xsi:type=&quot;xsd:array&quot;&gt;
+	&lt;list name=&quot;objects&quot;&gt;
         	&lt;param name=&quot;1min&quot;&gt;UCD-SNMP-MIB::laLoad.1&lt;/param&gt;
                 &lt;param name=&quot;5min&quot;&gt;UCD-SNMP-MIB::laLoad.2&lt;/param&gt;
                 &lt;param name=&quot;15min&quot;&gt;UCD-SNMP-MIB::laLoad.3&lt;/param&gt;
-        &lt;/param&gt;
+        &lt;/list&gt;
 &lt;/template&gt;

Modified: branches/xmlconfig2/config.sample/xml.php
===================================================================
--- branches/xmlconfig2/config.sample/xml.php	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/config.sample/xml.php	2006-08-02 19:09:49 UTC (rev 162)
@@ -26,8 +26,11 @@
 //$config['used'] = true; // is the simple config used
 $xslt = new XSLTProcessor();
 
+//define('CONFIGPATH','');
+
 $dom = new domDocument();
 $dom-&gt;load(CONFIGPATH . 'xml/config.xml');
+
 $dom-&gt;Xinclude();
 
 function avt($matches) {
@@ -61,17 +64,22 @@
 
 $xsl = new domDocument();
 $xsl -&gt; load(CONFIGPATH . 'clean.xsl');
+
 $xslt -&gt; importStylesheet($xsl);
 
 $xml = $xslt -&gt; transformToDoc($dom);
 
 __traversedom ($xml-&gt;documentElement);
 
+
 $xmlconfig = xmlconfig::read($xml);
 $config['modules'] = $xmlconfig['modules'];
 $config['graphs'] = $xmlconfig['graphs'];
 $config['used'] = true;
 
-//print_r($xmlconfig);
+/*
+header(&quot;Content-type: text/xml\n&quot;);
+print($xml-&gt;saveXML()); 
+*/
 
 ?&gt;

Modified: branches/xmlconfig2/includes/xmlconfig.class.php
===================================================================
--- branches/xmlconfig2/includes/xmlconfig.class.php	2006-07-04 15:45:34 UTC (rev 161)
+++ branches/xmlconfig2/includes/xmlconfig.class.php	2006-08-02 19:09:49 UTC (rev 162)
@@ -33,17 +33,17 @@
 						
 												
 						break;
+					case 'list':
+						$name = $child-&gt;getAttribute('name');
+						self::__traverseParams($child, $config[ $name ]);
+						break;
 					case 'param':							
 						$name = $child-&gt;getAttribute('name');
 						if ($name=='') $name = count($config);
 						
-						if ($child-&gt;getAttributeNS('<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>','type')=='xsd:array') {
-							self::__traverseParams($child, $config[ $name ]);
-						} else {
-							$config[ $name ] = $child-&gt;nodeValue;
-							self::__traverseParams($child, $config);
+						$config[ $name ] = $child-&gt;nodeValue;
+						self::__traverseParams($child, $config);
 
-						}
 						break;
 
 					default:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000132.html">[Serverstats-devel] r163 - in branches/xmlconfig2: config.sample	config.sample/xml includes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#131">[ date ]</a>
              <a href="thread.html#131">[ thread ]</a>
              <a href="subject.html#131">[ subject ]</a>
              <a href="author.html#131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/serverstats-devel">More information about the Serverstats-devel
mailing list</a><br>
</body></html>
